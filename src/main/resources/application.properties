spring.application.name=collectFocep
spring.datasource.url=jdbc:mysql://localhost:3306/collect_focep_bd?useSSL=false&serverTimezone=UTC&characterEncoding=UTF-8&createDatabaseIfNotExist=true&allowPublicKeyRetrieval=true
spring.datasource.username=root
spring.datasource.password=dido0605

# JPA / Hibernate
spring.jpa.hibernate.ddl-auto=update
# Mise \u00E0 jour du dialecte pour \u00E9viter l'avertissement de d\u00E9pr\u00E9ciation
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
# Option pour d\u00E9sactiver la v\u00E9rification des cl\u00E9s \u00E9trang\u00E8res \u00E0 l'initialisation
spring.jpa.properties.hibernate.hbm2ddl.auto=update
# D\u00E9sactiver les contraintes de cl\u00E9s \u00E9trang\u00E8res pendant les op\u00E9rations DDL
spring.datasource.hikari.data-source-properties.sessionVariables=FOREIGN_KEY_CHECKS=0
# Configuration pour \u00E9viter les probl\u00E8mes de lazy loading
spring.jpa.open-in-view=false
# Am\u00E9lioration des performances avec le batching
spring.jpa.properties.hibernate.jdbc.batch_size=50
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# Configuration MVC
spring.mvc.contentnegotiation.favor-parameter=false
spring.mvc.contentnegotiation.media-types.json=application/json

# Configuration Jackson
spring.jackson.serialization.FAIL_ON_EMPTY_BEANS=false
spring.jackson.time-zone=UTC
# Am\u00E9lioration de la gestion des propri\u00E9t\u00E9s manquantes
spring.jackson.deserialization.fail-on-unknown-properties=false
# Pour \u00E9viter les probl\u00E8mes avec les relations bidirectionnelles
spring.jackson.serialization.write-dates-as-timestamps=false

# Logging
logging.level.org.springframework.security=INFO
logging.level.org.example.collectfocep=DEBUG
# Ajout de logging pour Hibernate pour le d\u00E9pannage
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
# Logging pour les erreurs d'exception SQL
logging.level.org.hibernate.engine.jdbc.spi.SqlExceptionHelper=DEBUG

# JWT Configuration
jwt.secret=4LTVxS2ny0UJfmNVbSjaNC0S/qKbK/yaqXPOms+V2IWiH8qzVHu4ZDFXhlf8NWaYk2C1I9Cv3CEyh17bXvfdSg==
jwt.expiration=3600000

# Audit configuration
audit.enabled=true

# Cache Configuration
spring.cache.type=caffeine
spring.cache.caffeine.spec=maximumSize=1000,expireAfterAccess=3600s

# Encodage
spring.mandatory-file-encoding=UTF-8
server.servlet.encoding.charset=UTF-8
server.servlet.encoding.enabled=true
server.servlet.encoding.force=true

# Configuration des param\u00E8tres m\u00E9tier
transaction.timeout=30
commission.tva.rate=0.1925
commission.emf.rate=0.30
commission.nouveauCollecteur.duree=3
commission.nouveau.collecteur=40000
commission.calculation.on.movement=false

# Resilience4j Circuit Breaker
resilience4j.circuitbreaker.instances.collecteurService.slidingWindowSize=10
resilience4j.circuitbreaker.instances.collecteurService.failureRateThreshold=50
resilience4j.circuitbreaker.instances.collecteurService.waitDurationInOpenState=10000
resilience4j.circuitbreaker.instances.collecteurService.permittedNumberOfCallsInHalfOpenState=3

# Resilience4j Retry
resilience4j.retry.instances.collecteurRetry.maxAttempts=3
resilience4j.retry.instances.collecteurRetry.waitDuration=1000

# Profile d'initialisation des donn\u00E9es
spring.profiles.active=init

# D\u00E9sactiver compl\u00E8tement Redis
spring.data.redis.enabled=false
# D\u00E9sactiver explicitement le health check Redis
management.health.redis.enabled=false
# Sp\u00E9cifier clairement le type de cache \u00E0 utiliser (Caffeine)
spring.cache.type=caffeine

spring.main.lazy-initialization=true
spring.main.allow-circular-references=true

# Debug mode pour plus d'information au d\u00E9marrage
debug=true